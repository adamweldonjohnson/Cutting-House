'use strict';

//NAVBAR/HAMBURGER
//CAPTURE ON LOAD
document.addEventListener('DOMContentLoaded', function () {

  // Get all "navbar-burger" elements
  var $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);

  // Check if there are any navbar burgers
  if ($navbarBurgers.length > 0) {

    // Add a click event on each of them
    $navbarBurgers.forEach(function ($el) {
      $el.addEventListener('click', function () {

        // Get the target from the "data-target" attribute
        var target = $el.dataset.target;
        var $target = document.getElementById(target);

        // Toggle the class on both the "navbar-burger" and the "navbar-menu"
        $el.classList.toggle('is-active');
        $target.classList.toggle('is-active');
      });
    });
  }
});

//IMAGE CONTAINER/MODAL PAIRS
var aboutImgTop1 = document.getElementById('aboutImgTop1');
var aboutImgTop2 = document.getElementById('aboutImgTop2');
var aboutImgTop3 = document.getElementById('aboutImgTop3');
var aboutImgTop4 = document.getElementById('aboutImgTop4');
var aboutImgBottom1 = document.getElementById('aboutImgBottom1');
var aboutImgBottom2 = document.getElementById('aboutImgBottom2');
var aboutImgBottom3 = document.getElementById('aboutImgBottom3');
var aboutImgBottom4 = document.getElementById('aboutImgBottom4');
var aboutImgTop1Modal = document.getElementById('aboutImgTop1Modal');
var aboutImgTop2Modal = document.getElementById('aboutImgTop2Modal');
var aboutImgTop3Modal = document.getElementById('aboutImgTop3Modal');
var aboutImgTop4Modal = document.getElementById('aboutImgTop4Modal');
var aboutImgBottom1Modal = document.getElementById('aboutImgBottom1Modal');
var aboutImgBottom2Modal = document.getElementById('aboutImgBottom2Modal');
var aboutImgBottom3Modal = document.getElementById('aboutImgBottom3Modal');
var aboutImgBottom4Modal = document.getElementById('aboutImgBottom4Modal');

//Toggles opacity on hover for desktop
function opacityToggle(element) {
  element.addEventListener('mouseenter', function () {
    element.style.opacity = 0.5;
  });
  element.addEventListener('mouseleave', function () {
    element.style.opacity = 1;
  });
}

//Sniffs browser for mobile
var clickEvent = function () {
  if ('ontouchstart' in document.documentElement === true) return 'touchstart';else return 'click';
}();

//Activates modal on click or touch
function modalToggle(element) {
  if (clickEvent == 'click') {
    element.addEventListener('click', function () {
      // console.log(element.id);
      var modal = document.getElementById(element.id + 'Modal');
      // console.log(modal);
      modal.classList.toggle('is-active');
    });
  } else {
    element.addEventListener('touchmove', function () {
      event.preventDefault(); //Prevents user from opening modal when scrolling through the page
    });
    element.addEventListener('touchstart', function () {
      var modal = document.getElementById(element.id + 'Modal');
      modal.classList.toggle('is-active');
    });
  }
}

//MODAL CLOSE
function modalClose(element) {
  var modal = document.getElementById(element.id + 'Modal');
  if (clickEvent == 'click') {
    modal.addEventListener('click', function () {
      modal.classList.toggle('is-active');
    });
  } else {
    modal.addEventListener('touchend', function () {
      modal.classList.toggle('is-active');
    });
  }
}

//Combines hover state and modal toggles
function imgHoverAndModalToggle(element) {
  opacityToggle(element);
  modalToggle(element);
  modalClose(element);
}

//Activating hover and toggle for images and their respective modals
imgHoverAndModalToggle(aboutImgTop1);
imgHoverAndModalToggle(aboutImgTop2);
imgHoverAndModalToggle(aboutImgTop3);
imgHoverAndModalToggle(aboutImgTop4);
imgHoverAndModalToggle(aboutImgBottom1);
imgHoverAndModalToggle(aboutImgBottom2);
imgHoverAndModalToggle(aboutImgBottom3);
imgHoverAndModalToggle(aboutImgBottom4);